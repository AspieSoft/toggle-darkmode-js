/*! https://github.com/AspieSoft/toggle-darkmode-js v1.0.1 | (c) aspiesoftweb@gmail.com */
const DarkMode=function(){const e="undefined"!=typeof jQuery?jQuery:"undefined"!=typeof jqAlt?jqAlt.jquery():(console.error("jQuery or jqAlt were not loaded!"),undefined);if(!e)return;const r=["script","style","br","hr","wbr"],o=["img","iframe","video","embed","oembed","object","svg"];let n=e(":root"),t=e("body"),c=!1,a=!1;function d(r){!a&&(!0===r||"dark"===r)||a&&(!1===r||"light"===r)?(c=!0,s()):!a&&(!1===r||"light"===r)||a&&(!0===r||"dark"===r)||c?(c=!1,t.children().each((function(){const r=e(this);r.prop("tagName")&&(r.removeClass("invert-darkmode"),function o(r){r.children().each((function(){const r=e(this);r.prop("tagName")&&(r.removeClass("invert-darkmode"),o(r))}))}(r))})),n.removeClass("invert-darkmode")):(c=!0,s())}function i(e){if(!e||"string"!=typeof e)return;let r,o=0==e.indexOf("#"),n=0==e.indexOf("rgb");if(o){const o=7==e.length;let n=e.substr(1).match(o?/(\S{2})/g:/(\S{1})/g);n&&(r=parseInt(n[0]+(o?"":n[0]),16),g=parseInt(n[1]+(o?"":n[1]),16),b=parseInt(n[2]+(o?"":n[2]),16))}else if(n){let o=e.match(/(\d+)/g);o&&(r=o[0],g=o[1],b=o[2])}return"undefined"!=typeof r?(299*r+587*g+114*b)/1e3:void 0}function s(){t.children().each((function(){const n=e(this),t=n.prop("tagName").toLowerCase();if(!t||r.includes(t))return;if(o.includes(t))return void n.addClass("invert-darkmode");const c=i(n.css("background-color"));c<190&&c>80?(n.addClass("invert-darkmode"),l(n)):u(n)})),n.addClass("invert-darkmode")}function u(n){n.children().each((function(){const n=e(this),t=n.prop("tagName").toLowerCase();if(!t||r.includes(t))return;if(o.includes(t))return void n.addClass("invert-darkmode");const c=i(n.css("background-color"));c<190&&c>80?(n.addClass("invert-darkmode"),l(n)):u(n)}))}function l(n){n.children().each((function(){const n=e(this),t=n.prop("tagName").toLowerCase();if(!t||r.includes(t))return;if(o.includes(t))return;const c=i(n.css("background-color"));c<190&&c>80?l(n):(n.addClass("invert-darkmode"),u(n))}))}return e(document).ready((function(){e("head").append("<style>.invert-darkmode{filter: invert(1) hue-rotate(180deg);}</style>"),n=e(":root"),t=e("body");const o=t.css("background-color");if(!o||"rgba(0, 0, 0, 0)"===o){const e=n.css("background-color");e&&"rgba(0, 0, 0, 0)"!==e?t.css({background:e,color:n.css("color")}):t.css({background:"white",color:"black"})}function s(o){o.children().each((function(){const o=e(this),n=o.prop("tagName");if(!n||r.includes(n.toLowerCase()))return;const t=o.css("background-color")||"rgba(0, 0, 0, 0)";t&&"rgba(0, 0, 0, 0)"!==t||o.css("background",o.parent().css("background-color")),s(o)}))}s(t),i(t.css("background-color"))<180&&(a=!0),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?d("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches&&d("light"),window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){e.matches&&d("dark")})),window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",(function(e){e.matches&&d("light")}))),e("body").on("DOMSubtreeModified",(function(){s(t),d(!a&&c||a&&!c)}))})),{toggle:d,ignore:function(e){Array.isArray(e)?r.concat(e):r.push(e)},invert:function(e){Array.isArray(e)?o.concat(e):o.push(e)}}}();
